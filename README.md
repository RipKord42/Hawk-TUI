# Hawk-TUI

A TUI (Terminal User Interface) email client with a goal of gaining as much usability as a GUI client as possible.  Text extraction from HTML email works well, a full fidelity view only image view of HTML can be viewed in app, and full fidelity HTML with links and images can open in browser with a shortcut.

This is currently functional for basic email usage but is very much to be considered alpha quality at this point, primarily because exhaustive testing has not been completed yet.  Further testing continues and additional features coming soon. 

# Disclaimer

I am not a developer, I am a long time systems guy and Linux enthusiast who is just learning to code. The vast majority of this project was generated by Claude Code. I created (err...co-created?) this for two reasons 1) I want a really good TUI email client and 2) It will be a launch pad for me to learn development further.

I openly welcome any feedback, input, or assistance to improve this project.

## Current Features

- **HTML Email Rendering**: View HTML emails with proper formatting and inline images using terminal graphics (Sixel/Kitty protocol)
- **Multi-Account Support**: Manage multiple email accounts in a unified interface
- **IMAP with IDLE Push**: Real-time notifications when new mail arrives — no polling needed
- **Full Offline Sync**: All emails are synced to a local SQLite database for offline access
- **SMTP Sending**: Compose, reply, and forward emails with your preferred editor
- **Client-Side Spam Filter**: Bayesian spam classifier that learns from your "Mark as Junk" actions
- **XDG Compliant**: Configuration and data files follow the XDG Base Directory specification

## Requirements

- Python 3.11+
- A terminal with good Unicode support
- For image rendering: a terminal that supports Sixel or Kitty graphics protocol (foot, kitty, wezterm, etc.)

## Installation

```bash
# Clone the repository
git clone https://github.com/RipKord42/hawk-tui.git
cd hawk-tui

# Install in development mode
pip install -e .

# Or install with browser rendering support (for complex HTML emails)
pip install -e ".[browser]"

# For using browser rendering, install Chromium

## Configuration

1. Copy the example config:
   ```bash
   mkdir -p ~/.config/hawk-tui
   cp config.example.toml ~/.config/hawk-tui/config.toml
   ```

2. Edit the config with your account details:
   ```bash
   $EDITOR ~/.config/hawk-tui/config.toml
   ```

3. Hawk will prompt you for your password

## Usage

```bash
# Run Hawk-TUI
hawk-tui

# Or run as a Python module
python -m hawk_tui

# Show configuration paths
hawk-tui --paths

# Show version
hawk-tui --version
```

## Keybindings

### Navigation
- `j/k` or `↓/↑` - Navigate messages
- `Tab` - Switch focus between panels
- `Enter` - Open/select

### Message Actions
- `r` - Reply
- `R` - Reply All
- `d` or `Delete` - Delete (move to Trash)
- `*` - Toggle star
- `J` - Mark as Junk (trains spam filter)
- `!` - Mark as Not Junk

### Global
- `Ctrl+r` - Sync all accounts
- `v` - View HTML in browser
- `Ctrl+p` - Command palette
- `q` - Quit

## Architecture

```
hawk_tui/
├── core/           # Domain models (Account, Folder, Message)
├── imap/           # IMAP client, sync, and IDLE push
├── smtp/           # SMTP client for sending
├── storage/        # SQLite database layer
├── rendering/      # HTML→terminal rendering
├── spam/           # Bayesian spam classifier
└── ui/             # Textual TUI components
    ├── screens/    # Full-screen views
    ├── widgets/    # Reusable components
    └── styles/     # Textual CSS
```

## XDG Directories

Hawk-TUI follows the XDG Base Directory specification:

| Type   | Default Location                  | Contents                    |
|--------|-----------------------------------|-----------------------------|
| Config | `~/.config/hawk-tui/`             | `config.toml`               |
| Data   | `~/.local/share/hawk-tui/`        | SQLite database, spam model |
| Cache  | `~/.cache/hawk-tui/`              | Rendered content cache      |

## Development

```bash
# Install dev dependencies
pip install -e ".[dev]"

# Run tests
pytest

# Run linter
ruff check src/

# Type checking
mypy src/
```

## License

MIT

## Credits

Built with:
- [Textual](https://textual.textualize.io/) - TUI framework
- [aioimaplib](https://github.com/bamthomas/aioimaplib) - Async IMAP
- [aiosmtplib](https://github.com/cole/aiosmtplib) - Async SMTP
- [inscriptis](https://github.com/weblyzard/inscriptis) - HTML→text conversion
- [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/) - HTML parsing
- [Pillow](https://pillow.readthedocs.io/) - Image processing
